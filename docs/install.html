<!DOCTYPE html>
    <!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2018-11-09 
 | Rendered using BloomReach Forge Maven Skin 3.0.1 based on Apache Maven Fluido Skin
-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                  <meta name="Date-Revision-yyyymmdd" content="20181109" />
              <meta http-equiv="Content-Language" content="en" />
      <title>HST PDF Renderer &#x2013; Installation</title>
  <link rel="stylesheet" href="./css/forge-maven-skin-syntaxhighlighter-3.0.1.min.css"/>
  <link rel="stylesheet" href="./css/forge-maven-skin-3.0.1.min.css"/>
  <link rel="stylesheet" href="./css/site.css" />
  <link rel="stylesheet" href="./css/print.css" media="print" />
  <link rel="icon" type="image/png" href="./images/skin/logo_64.png" sizes="64x64">

  
  <script type="text/javascript" src="./js/forge-maven-skin-syntaxhighlighter-3.0.1.min.js"></script>
  <script type="text/javascript" src="./js/forge-maven-skin-3.0.1.min.js"></script>

    </head>
<body class="topBarDisabled">
                        <a href="https://github.com/bloomreach-forge/hst-pdf-renderer">
    <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
         src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"
         alt="Fork me on GitHub">
  </a>
          <div class="container-fluid">
  <div id="banner">
    <div id="logo">
      <a href="http://www.github.com/bloomreach-forge">
        <img src="./images/skin/logo.png" alt="BloomReach Forge Logo" />
      </a>
    </div>
    <div class="pull-left">              <div id="bannerLeft">    <h1>HST PDF Renderer</h1>
    </div>
              </div>
    <div class="pull-right"></div>
    <div class="clear"><hr/></div>
  </div>

  <div id="breadcrumbs">
    <div class="links">
      <a href="https://developers.bloomreach.com">developers.bloomreach.com</a>
      <a href="https://www.onehippo.org">onehippo.org</a>
    </div>
    <ul class="breadcrumb">
    
  <li id="publishDate">published: 2018-11-09  
  </li>
  
        
            </ul>
    <div class="clear"><hr/></div>
  </div>
<div class="row-fluid">
  <div id="leftColumn" class="span2">
    <div class="well sidebar-nav">
    
    <ul class="nav nav-list">
            <li class="nav-header">Overview</li>
              <li>  <a href="index.html" title="About">  <span class="none"></span>  About</a>  </li>
        <li class="active">  <a href="#"><span class="none"></span>Installation</a>
  </li>
        <li>  <a href="release-notes.html" title="Release notes">  <span class="none"></span>  Release notes</a>  </li>
                  <li class="nav-header">Autogenerated Docs</li>
                                                                                                                                                                                                          <li>  <a href="project-info.html" title="Project Information">  <span class="icon-chevron-right"></span>  Project Information</a>  </li>
                                                                                    <li>  <a href="project-reports.html" title="Project Reports">  <span class="icon-chevron-right"></span>  Project Reports</a>  </li>
        </ul>
    
          <hr />
      <div id="poweredBy">
                <div class="clear"></div>
                <div class="clear"></div>
                <div class="clear"></div>
                <div class="clear"></div>
              <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">  <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />  </a>
          </div>
    </div>
  </div>
  <div id="bodyColumn"  class="span10" >
    
  
    <div class="section">
<h2><a name="HST_PDF_Renderer"></a>HST PDF Renderer</h2>
      
<div class="section">
<h3><a name="Dependencies"></a>Dependencies</h3>
        
<p>Add the following dependency to the SITE Application module POM:</p>
        
<div class="brush: xml">
        
<div class="source"><pre>
    &lt;!-- SNIP --&gt;

    &lt;repository&gt;
      &lt;id&gt;hippo-maven2-forge&lt;/id&gt;
      &lt;name&gt;Hippo Maven 2 Forge repository&lt;/name&gt;
      &lt;url&gt;http://maven.onehippo.com/maven2-forge/&lt;/url&gt;
      &lt;snapshots /&gt;
    &lt;/repository&gt;

    &lt;!-- SNIP --&gt;

    &lt;dependency&gt;
      &lt;groupId&gt;org.onehippo.forge.hstpdfrenderer&lt;/groupId&gt;
      &lt;artifactId&gt;hstpdfrenderer&lt;/artifactId&gt;
      &lt;version&gt;${forge.hstpdfrenderer.version}&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;!-- SNIP --&gt;
        </pre></div>
        </div>
      </div>

      
<div class="section">
<h3><a name="Servlet_Filter_Configuration"></a>Servlet Filter Configuration</h3>
        
<p>Add the servlet filter configuration in the web.xml of your web application like the following:</p>
        
<p>
          <i>
            Note: The mapping of the servlet filter, 'HtmlPDFRenderingFilter', must be located before the other
                  rendering servlet filters such as 'HstFilter' because 'HtmlPDFRenderingFilter' should capture the
                  rendered HTML output to transform to PDF output.
          </i>
        </p>
        
<p>
          In the following example configuration, the HtmlPDFRenderingFilter servlet filter is configured to handle
          all the request paths starting with '/pdf/*'.
          This example assumes you will configure a HST mount named 'pdf' under the HST root mount for convenience.
        </p>
        
<div class="brush: xml">
        
<div class="source"><pre>
  &lt;!-- SNIP --&gt;

  &lt;filter&gt;
    &lt;filter-name&gt;HtmlPDFRenderingFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.onehippo.forge.hst.pdf.renderer.servlet.HtmlPDFRenderingFilter&lt;/filter-class&gt;
    &lt;init-param&gt;
      &lt;param-name&gt;tidy.props&lt;/param-name&gt;
      &lt;param-value&gt;/WEB-INF/tidy.properties&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
      &lt;param-name&gt;css.uris&lt;/param-name&gt;
      &lt;param-value&gt;/WEB-INF/default-pdf-renderer.css&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;!--
    &lt;init-param&gt;
      &lt;param-name&gt;font.paths&lt;/param-name&gt;
      &lt;param-value&gt;
        /home/tester/fonts/courier.ttf
        /home/tester/fonts/verdana.ttf
      &lt;/param-value&gt;
    &lt;/init-param&gt;
    --&gt;
  &lt;/filter&gt;

  &lt;!-- SNIP --&gt;

  &lt;filter-mapping&gt;
    &lt;filter-name&gt;HtmlPDFRenderingFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/pdf/*&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;

  &lt;!-- SNIP --&gt;
        </pre></div>
        </div>
        
        
<p>
          Here is the detail for all the configurable init parameters of HtmlPDFRenderingFilter:
        </p>
        
<table border="0" class="table table-striped">
          
<tr class="a">
            
<th>Init Parameter Name</th>
            
<th>Description</th>
            
<th>Example Value(s)</th>
            
<th>Default Value</th>
            
<th>Since</th>
          </tr>
          
<tr class="b">
            
<td>tidy.props</td>
            
<td>
              Context relative JTidy configuration properties resource path.
              <br />
              The properties file should contain valid JTidy configurations.
              <br />
              For detail on available JTidy configurations,
              see <a class="externalLink" href="http://tidy.sourceforge.net/docs/quickref.html" target="_blank">http://tidy.sourceforge.net/docs/quickref.html</a>.
            </td>
            
<td>
              <a class="externalLink" href="https://github.com/bloomreach-forge/hst-pdf-renderer/blob/master/demo/site/src/main/webapp/WEB-INF/tidy.properties" target="_blank">/WEB-INF/tidy.properties</a>
            </td>
            
<td>
            </td>
            
<td>
              1.01.00
            </td>
          </tr>
          
<tr class="a">
            
<td>css.uris</td>
            
<td>
              CSS file resource paths used when generating PDF output.
              You can specify multiple CSS file resources by separating comma, semicolon, tab or line break.
              Each CSS file resource can be either context relative path (e.g., /WEB-INF/default-pdf-renderer.css)
              or file: URI or relative path from the current working directory.
            </td>
            
<td>
              /WEB-INF/default-pdf-renderer.css
            </td>
            
<td>
            </td>
            
<td>
              0.01.00
            </td>
          </tr>
          
<tr class="b">
            
<td>font.paths</td>
            
<td>
              Font file paths used when embedding fonts into PDF output.
              You can specify multiple Font file paths by separating comma, semicolon, tab or line break.
              Each font file must be absolute file path (e.g., /home/tester/fonts/courier.ttf).
            </td>
            
<td>
              /home/tester/fonts/courier.ttf
            </td>
            
<td>
            </td>
            
<td>
              0.01.00
            </td>
          </tr>
          
<tr class="a">
            
<td>buffer.size</td>
            
<td>
              Byte buffer size used when cleaning up HTML output and transforming HTML output to XHTML output internally.
            </td>
            
<td>
              4096
            </td>
            
<td>
              4096
            </td>
            
<td>
              0.01.00
            </td>
          </tr>
          
<tr class="b">
            
<td>user.agent.callback.class</td>
            
<td>
              The name of a custom class which implements org.xhtmlrenderer.extend.UserAgentCallback.
              If you want to customize the internal callback mechanism for Flying Saucer for some reason
              (e.g., custom image loading), then you can provide the class name of your custom class.
            </td>
            
<td>
            </td>
            
<td>
            </td>
            
<td>
              0.01.00
            </td>
          </tr>
        </table>
      </div>

      
<div class="section">
<h3><a name="Example:_Add_pdf_Mount_in_HST_Configuration"></a>Example: Add 'pdf' Mount in HST Configuration</h3>
        
<p>
          As mentioned above, it is very convenient if you configure a sub mount for automatic PDF generation from the normal HTML rendering
          because the servlet filter configuration and link generations become much easier.
        </p>
        
<p>
          So, for example, 'pdf' sub mount can be configured under 'hst:root' mount:
        </p>
        
<div class="brush: xml">
        
<div class="source"><pre>
      &lt;!-- SNIP --&gt;

      &lt;sv:node sv:name=&quot;hst:root&quot;&gt;
        &lt;sv:property sv:name=&quot;jcr:primaryType&quot; sv:type=&quot;Name&quot;&gt;
          &lt;sv:value&gt;hst:mount&lt;/sv:value&gt;
        &lt;/sv:property&gt;

        &lt;!-- SNIP --&gt;

        &lt;!-- The following 'pdf' mount configuration is added under 'hst:root' mount configuration. --&gt;
        &lt;sv:node sv:name=&quot;pdf&quot;&gt;
          &lt;sv:property sv:name=&quot;jcr:primaryType&quot; sv:type=&quot;Name&quot;&gt;
            &lt;sv:value&gt;hst:mount&lt;/sv:value&gt;
          &lt;/sv:property&gt;
          &lt;sv:property sv:name=&quot;hst:alias&quot; sv:type=&quot;String&quot;&gt;
            &lt;sv:value&gt;pdf&lt;/sv:value&gt;
          &lt;/sv:property&gt;
        &lt;/sv:node&gt;
      &lt;/sv:node&gt;

      &lt;!-- SNIP --&gt;
        </pre></div>
        </div>
        
<p>
          You can also consider configuring sitemap items for automatic PDF generation URLs, but in that case,
          you will have to configure many more URL patterns for HtmlPDFRenderingFilter and
          it will more difficult or tedious to generate PDF URL links.
        </p>
      </div>

      
<div class="section">
<h3><a name="Example:_Create_a_pdf_link_in_your_pages"></a>Example: Create a 'pdf' link in your page(s)</h3>
        
<p>
          If you configured a pdf rendering mount, then it is very easy to generate PDF rendering links in your templates.
          See the following example:
        </p>
        
<div class="brush: xml">
        
<div class="source"><pre>
    &lt;c:if test=&quot;${not empty document}&quot;&gt;
      &lt;div id=&quot;pdflink&quot;&gt;
        &lt;a href='&lt;hst:link mount=&quot;pdf&quot; hippobean=&quot;${document}&quot;/&gt;'&gt;
          &lt;img src=&quot;&lt;hst:link path=&quot;/images/pdf.gif&quot;/&gt;&quot; border=&quot;0&quot; /&gt;
        &lt;/a&gt;
      &lt;/div&gt;
    &lt;/c:if&gt;
        </pre></div>
        </div>
      </div>

      
<div class="section">
<h3><a name="Example:_Stylesheets_for_PDF_Rendering"></a>Example: Stylesheet(s) for PDF Rendering</h3>
        
<p>
          HtmlPDFRenderingFilter uses the configured stylesheet resources when rendering PDF output.
          Here's an example CSS file (You can download this example <a class="externalLink" href="https://github.com/bloomreach-forge/hst-pdf-renderer/blob/master/demo/site/src/main/webapp/WEB-INF/default-pdf-renderer.css">here</a>.):
        </p>
        
<div class="brush: plain">
        
<div class="source"><pre>
@page { 
  size: letter;
  margin: 0.8in; 
  -fs-flow-top: &quot;header&quot;;
  -fs-flow-bottom: &quot;footer&quot;;
  -fs-flow-left: &quot;left&quot;;
  -fs-flow-right: &quot;right&quot;;
  border: thin solid gray;
  padding: 1em;
  @top-left {
    content: &quot;Generated PDF Pages&quot;;
  }
  @top-right {
    content: &quot;HST PDF Renderer&quot;;
  }
  @bottom-left {
    content: &quot;www.onehippo.org&quot;;
  }
  @bottom-right {
    content: &quot;Page &quot; counter(page) &quot;/&quot; counter(pages);
  }
}

#header {
  font: bold serif;
  position: absolute; top: 0; left: 0; 
  -fs-move-to-flow: &quot;header&quot;;
}

#footer {
  font-size: 90%; font-style: italic; 
  position: absolute; top: 0; left: 0;
  -fs-move-to-flow: &quot;footer&quot;;
}

#pagenumber:before {
  content: counter(page); 
}

#pagecount:before {
  content: counter(pages);  
}

#pagebreakbefore {
  page-break-before: always;
}

#pagebreakafter {
  page-break-after: always;
}

#hd {
  display: none;
}

#leftmenu {
  display: none;
}

#right {
  display: none;
}
        </pre></div>
        </div>
        
<p>
          See the <a class="externalLink" href="http://flyingsaucerproject.github.com/flyingsaucer/r8/guide/users-guide-R8.html" target="_blank">The Flying Saucer User's Guide</a>
          for detail.
        </p>
      </div>

    </div>

  

    </div>
    </div>
    </div>
    <hr/>
    <footer>
    <div class="container-fluid">
      <div class="row-fluid">
          <p class="copyright">Copyright &copy;      2018.
  BloomReach Inc. All rights reserved.
</p>
    </div>
            </div>
  </footer>
    </body>
</html>

